const express=require("express"),cookieParser=require("cookie-parser"),app=express();app.use("/css",express.static(__dirname+"/public/styles")),app.use("/js",express.static(__dirname+"/public/scripts")),app.use("/img",express.static(__dirname+"/public/images")),app.use("/font",express.static(__dirname+"/public/fonts")),app.use(cookieParser());const pug=require("pug"),availableLanguages=["en","de"],{I18n:I18n}=require("i18n"),i18n=new I18n({locales:availableLanguages,cookie:"locale",directory:__dirname+"/i18n",extension:".min.json"});app.use(i18n.init),app.use(((e,s,a)=>{s.locals.__=s.__=function(){return i18n.__.apply(e,arguments)},a()}));const routes=require("./config/routes.min");routes.routes.forEach((e=>{app.get(e[0],((s,a)=>{a.locals.site=e[1],a.locals.availableLanguages=availableLanguages,a.locals.search={query:""};try{a.status(e[2]||200).send(pug.renderFile(__dirname+"/app/"+e[1]+".pug",a.locals))}catch(e){a.status(500).send("ERROR: "+e)}}))}));const server=app.listen(3e3);